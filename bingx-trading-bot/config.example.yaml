# Trading Engine Configuration
# Copy this file to config.yaml and fill in your API keys

# Trading Configuration
trading:
  enabled: true
  testnet: false  # Set to true for testing

  symbols:
    - FARTCOIN-USDT
    - DOGE-USDT

  strategies:
    multi_timeframe_long:
      enabled: true
      base_risk_pct: 1.0
      max_risk_pct: 3.0
      max_positions: 1

      # Strategy parameters (from backtest)
      body_threshold: 1.2
      volume_multiplier: 3.0
      wick_threshold: 0.35
      rsi_long_min: 45
      stop_atr_mult: 3.0
      target_atr_mult: 12.0
      win_streak_scaling: 0.5
      use_trailing_stop: true
      use_partial_exits: true
      max_hold_hours: 24

      # 5-min filter
      rsi_5min_min: 57
      distance_from_sma: 0.6

    trend_distance_short:
      enabled: true
      base_risk_pct: 1.5
      max_risk_pct: 4.0
      max_positions: 1

      # Strategy parameters
      body_threshold: 1.2
      volume_multiplier: 3.0
      wick_threshold: 0.35
      rsi_short_min: 25
      rsi_short_max: 55
      stop_atr_mult: 3.0
      target_atr_mult: 15.0
      win_streak_scaling: 0.5
      use_trailing_stop: true
      use_partial_exits: true
      max_hold_hours: 24

      # Trend filter
      distance_from_50sma: 2.0
      below_200sma: true

    doge_volume_zones:
      enabled: true
      base_risk_pct: 1.0  # Conservative due to outlier dependency
      max_risk_pct: 2.0
      max_positions: 1

      # Volume zone detection (OPTIMIZED Dec 9, 2025)
      volume_threshold: 1.5      # 1.5x average volume
      min_zone_bars: 5           # 5+ consecutive bars
      max_zone_bars: 15
      lookback_bars: 20

      # Exit parameters (OPTIMIZED for BingX)
      stop_atr_mult: 1.5         # 1.5x ATR stop (tighter)
      tp_type: 'atr_multiple'    # 'atr_multiple' or 'rr_multiple'
      tp_atr_mult: 4.0           # 4.0x ATR take profit target
      max_hold_bars: 90          # 90 minutes max hold

      # Session filter (CRITICAL - Asia/EU only)
      session_filter: 'asia_eu'  # 'overnight', 'asia_eu', 'us', or 'all'

      # Risk management
      win_streak_scaling: 0.0    # NO scaling for outlier strategy
      use_trailing_stop: false   # No trailing - let TP hit
      use_partial_exits: false   # No partial exits - full TP or SL
      max_hold_hours: 1.5        # Max 1.5 hours in trade

      # ⚠️  OUTLIER-HARVESTING STRATEGY
      # - Top 5 trades = 95.3% of profit
      # - Must take EVERY signal to catch big moves
      # - Backtest: 10.75x Return/DD, 63.6% WR, -0.48% DD (32 days)

  risk_management:
    max_portfolio_risk: 5.0
    max_drawdown: 35.0
    cooldown_after_loss: 60
    max_consecutive_losses: 3
    max_daily_loss_pct: 25.0
    max_position_size_pct: 40

# Data Feed
data:
  provider: binance
  websocket_url: wss://stream.binance.com:9443/ws
  rest_api_url: https://api.binance.com/api/v3

  candle_interval: 1m
  buffer_size: 300

  max_price_change_pct: 20.0
  min_volume_threshold: 100

  reconnect_attempts: 5
  reconnect_delay_seconds: 5
  max_reconnect_delay: 60

# BingX API - GET YOUR KEYS FROM https://bingx.com/
bingx:
  api_key: ${BINGX_API_KEY}      # Set via environment variable
  api_secret: ${BINGX_API_SECRET}  # Set via environment variable
  testnet: false
  base_url: https://open-api.bingx.com

  requests_per_minute: 1200

  # Leverage Configuration
  default_leverage: 10
  leverage_mode: 'aggressive'  # 'conservative' or 'aggressive'

# Logging
logging:
  level: INFO
  console_output: true
  file_output: true
  file_path: ./logs/trading-engine.log
  max_size_mb: 50
  backup_count: 5
  json_format: false
  dashboard_interval_minutes: 60

# Database
database:
  type: sqlite
  path: ./data/trades.db
  echo: false
  pool_size: 5
  max_overflow: 10

# Email Notifications (via Resend)
notifications:
  enabled: true
  resend_api_key: ${RESEND_API_KEY}  # Get from https://resend.com
  to_email: ${NOTIFICATION_EMAIL}     # Your email address

  # What to notify (all enabled by default)
  notify_trade_opened: true
  notify_trade_closed: true
  notify_errors: true
  notify_emergency_stop: true
  notify_daily_summary: true
  notify_bot_started: true

# Safety Features
safety:
  dry_run: false  # Set to true for testing without real trades

  stop_file: ./STOP
  emergency_stop_enabled: true

  min_account_balance: 5.0
  check_existing_positions: true

  close_positions_on_shutdown: false
  max_shutdown_wait_seconds: 30
