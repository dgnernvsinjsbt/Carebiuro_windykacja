# Trading Engine Configuration
# Copy this file to config.yaml and fill in your API keys
#
# 8-Coin Donchian Breakout Portfolio (Dec 2025)
# Backtest Results (Jun-Dec 2025, 3% risk/trade):
# - Total Return: +35,902%
# - Max Drawdown: -39.9%
# - R:R Ratio: 899x
# - Win Rate: 60.6%
# - Total Trades: 619

trading:
  enabled: true
  testnet: false

  # 8-Coin Portfolio Symbols (ranked by R:R ratio)
  symbols:
    - PENGU-USDT      # 34.05x R:R (TP=7.0, SL=5, Period=25)
    - DOGE-USDT       # 16.72x R:R (TP=4.0, SL=4, Period=15)
    - FARTCOIN-USDT   # 12.57x R:R (TP=7.5, SL=2, Period=15)
    - ETH-USDT        # 10.12x R:R (TP=1.5, SL=4, Period=20)
    - UNI-USDT        #  9.95x R:R (TP=10.5, SL=2, Period=30)
    - PI-USDT         #  7.79x R:R (TP=3.0, SL=2, Period=15)
    - CRV-USDT        #  7.43x R:R (TP=9.0, SL=5, Period=15)
    - AIXBT-USDT      #  5.86x R:R (TP=12.0, SL=2, Period=15)

  strategies:
    # ═══════════════════════════════════════════════════════════════════
    # DONCHIAN BREAKOUT STRATEGIES (1H Candles, Jun-Dec 2025 Optimized)
    # Strategy: Entry on close breaking Donchian channel, ATR-based SL/TP
    # ═══════════════════════════════════════════════════════════════════

    donchian_pengu:
      enabled: true
      base_risk_pct: 3.0
      max_risk_pct: 5.0
      max_positions: 1
      # Params hardcoded in COIN_PARAMS: tp_atr=7.0, sl_atr=5, period=25

    donchian_doge:
      enabled: true
      base_risk_pct: 3.0
      max_risk_pct: 5.0
      max_positions: 1
      # Params hardcoded in COIN_PARAMS: tp_atr=4.0, sl_atr=4, period=15

    donchian_fartcoin:
      enabled: true
      base_risk_pct: 3.0
      max_risk_pct: 5.0
      max_positions: 1
      # Params hardcoded in COIN_PARAMS: tp_atr=7.5, sl_atr=2, period=15

    donchian_eth:
      enabled: true
      base_risk_pct: 3.0
      max_risk_pct: 5.0
      max_positions: 1
      # Params hardcoded in COIN_PARAMS: tp_atr=1.5, sl_atr=4, period=20

    donchian_uni:
      enabled: true
      base_risk_pct: 3.0
      max_risk_pct: 5.0
      max_positions: 1
      # Params hardcoded in COIN_PARAMS: tp_atr=10.5, sl_atr=2, period=30

    donchian_pi:
      enabled: true
      base_risk_pct: 3.0
      max_risk_pct: 5.0
      max_positions: 1
      # Params hardcoded in COIN_PARAMS: tp_atr=3.0, sl_atr=2, period=15

    donchian_crv:
      enabled: true
      base_risk_pct: 3.0
      max_risk_pct: 5.0
      max_positions: 1
      # Params hardcoded in COIN_PARAMS: tp_atr=9.0, sl_atr=5, period=15

    donchian_aixbt:
      enabled: true
      base_risk_pct: 3.0
      max_risk_pct: 5.0
      max_positions: 1
      # Params hardcoded in COIN_PARAMS: tp_atr=12.0, sl_atr=2, period=15

  risk_management:
    max_portfolio_risk: 25.0     # % of account (8 coins x 3% = 24% max)
    max_drawdown: 50.0           # % before emergency stop
    cooldown_after_loss: 0       # minutes (disabled for trend strategy)
    max_consecutive_losses: 10   # Higher for trend-following
    max_daily_loss_pct: 30.0     # Max daily loss %
    max_position_size_pct: 40    # Max % of capital per position

# Data Feed
data:
  provider: bingx
  websocket_url: wss://open-api-swap.bingx.com/swap-market
  rest_api_url: https://open-api.bingx.com

  candle_interval: 1h  # 1-hour candles for Donchian strategy
  buffer_size: 300     # Keep last 300 candles

  # Data validation
  max_price_change_pct: 30.0    # Flag if price changes > 30%
  min_volume_threshold: 100     # Min volume per candle

  # Reconnection
  reconnect_attempts: 5
  reconnect_delay_seconds: 5
  max_reconnect_delay: 60

# BingX API - GET YOUR KEYS FROM https://bingx.com/
bingx:
  api_key: ${BINGX_API_KEY}        # Set via environment variable
  api_secret: ${BINGX_API_SECRET}  # Set via environment variable
  testnet: false
  base_url: https://open-api.bingx.com

  # Rate limiting
  requests_per_minute: 1200

  # Leverage Configuration (5x max for safety)
  default_leverage: 5

  # Position sizing: Use risk-based sizing (3% per trade)
  # Position Value = (Equity * 3% / SL_distance%)
  # Set to 0 to use risk-based sizing, or set a fixed amount (e.g., 10.0)
  fixed_position_value_usdt: 0.0

  # Leverage Mode:
  # - 'conservative': Position size calculated from risk only
  # - 'aggressive': Position size multiplied by leverage
  leverage_mode: 'conservative'

# Logging
logging:
  level: INFO
  console_output: true
  file_output: true
  file_path: ./logs/trading-engine.log
  max_size_mb: 50
  backup_count: 5
  json_format: false
  dashboard_interval_minutes: 60

# Database
database:
  type: sqlite
  path: ./data/trades.db
  echo: false
  pool_size: 5
  max_overflow: 10

# Email Notifications (optional - uses Resend)
notifications:
  enabled: false
  resend_api_key: ${RESEND_API_KEY}
  to_email: ${NOTIFICATION_EMAIL}

# Safety Features
safety:
  dry_run: true  # Start in DRY RUN mode - set to false for live trading

  # Emergency stop
  stop_file: ./STOP
  emergency_stop_enabled: true

  # Pre-flight checks
  min_account_balance: 5.0
  check_existing_positions: true

  # Graceful shutdown
  close_positions_on_shutdown: false
  max_shutdown_wait_seconds: 30
