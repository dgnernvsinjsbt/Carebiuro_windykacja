<!--
  Google Reviews Carousel for Go High Level - v2.0
  Instructions: Copy entire file and paste into Go High Level Custom Code element
  IMPORTANT: Delete the old carousel code completely before pasting this new version
-->

<style>
/* ============================================
   GOOGLE REVIEWS CAROUSEL STYLES
   ============================================ */

* {
  box-sizing: border-box;
}

.reviews-carousel-container {
  width: 100%;
  background-color: transparent;
  padding: 60px 20px;
  overflow: hidden;
}

.reviews-container-inner {
  max-width: 1400px;
  margin: 0 auto;
}

/* Header Section */
.reviews-header {
  text-align: center;
  margin-bottom: 40px;
}

.reviews-header h2 {
  font-size: 48px;
  font-weight: 700;
  color: #1a1a1a;
  margin: 0 0 20px 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
}

.reviews-rating-wrapper {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 15px;
  flex-wrap: wrap;
}

.rating-number {
  font-size: 32px;
  font-weight: 700;
  color: #1a1a1a;
}

.stars {
  font-size: 28px;
  color: #FFC107;
  letter-spacing: 2px;
}

.review-count {
  font-size: 16px;
  color: #666;
  font-weight: 400;
}

/* Carousel Wrapper */
.carousel-wrapper {
  position: relative;
  margin: 0 auto;
  width: 100%;
  max-width: 1400px;
}

.carousel-track-container {
  overflow: hidden;
  width: 100%;
  margin: 0 60px; /* Push content away from arrows */
}

@media (max-width: 768px) {
  .carousel-wrapper {
    max-width: 100%;
  }

  .carousel-track-container {
    margin: 0; /* No margin on mobile - no arrows */
  }
}

/* Navigation Arrows */
.carousel-nav {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: white;
  border: 2px solid #00A676;
  color: #00A676;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-size: 24px;
  font-weight: bold;
  z-index: 10;
  transition: all 0.3s ease;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  user-select: none;
}

.carousel-nav:hover {
  background: #00A676;
  color: white;
  box-shadow: 0 4px 12px rgba(0, 166, 118, 0.3);
}

.carousel-nav:active {
  transform: translateY(-50%) scale(0.95);
}

.carousel-nav-prev {
  left: 0;
}

.carousel-nav-next {
  right: 0;
}

/* Hide arrows on mobile */
@media (max-width: 768px) {
  .carousel-nav {
    display: none;
  }
}

.carousel-track {
  display: flex;
  gap: 20px;
  transition: transform 1s ease-in-out;
  will-change: transform;
  padding: 0 2%;
}

.carousel-track.no-transition {
  transition: none;
}

/* Review Card */
.review-card {
  flex: 0 0 calc(25% - 15px);
  max-width: calc(25% - 15px);
  width: calc(25% - 15px);
  background: white;
  border-radius: 12px;
  padding: 30px;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
  display: flex;
  flex-direction: column;
  gap: 20px;
  min-height: 320px;
  position: relative;
}

/* Review Header (avatar + name + date) */
.review-header {
  display: flex;
  align-items: center;
  gap: 12px;
}

.review-avatar {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: #00A676;
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  font-weight: 600;
  flex-shrink: 0;
  text-transform: uppercase;
}

.review-author-info {
  flex: 1;
}

.review-author-name {
  font-size: 16px;
  font-weight: 600;
  color: #1a1a1a;
  margin: 0 0 4px 0;
}

.review-date {
  font-size: 13px;
  color: #999;
}

.review-platform {
  width: 20px;
  height: 20px;
  flex-shrink: 0;
}

/* Review Stars */
.review-stars {
  font-size: 18px;
  color: #FFC107;
  letter-spacing: 2px;
}

/* Review Text */
.review-text {
  font-size: 15px;
  line-height: 1.6;
  color: #333;
  flex: 1;
  overflow: hidden;
  display: -webkit-box;
  -webkit-line-clamp: 6;
  -webkit-box-orient: vertical;
}

/* Responsive Design */
@media (max-width: 1024px) {
  .review-card {
    flex: 0 0 calc(33.333% - 14px);
    max-width: calc(33.333% - 14px);
    width: calc(33.333% - 14px);
  }

  .reviews-header h2 {
    font-size: 36px;
  }
}

@media (max-width: 768px) {
  .reviews-carousel-container {
    padding: 40px 15px;
  }

  .reviews-header h2 {
    font-size: 32px;
  }

  .rating-number {
    font-size: 24px;
  }

  .stars {
    font-size: 22px;
  }
}

@media (min-width: 481px) and (max-width: 768px) {
  .review-card {
    flex: 0 0 calc(50% - 10px);
    max-width: calc(50% - 10px);
    width: calc(50% - 10px);
    padding: 25px 20px;
    min-height: 300px;
  }

  .review-author-name {
    font-size: 15px;
  }

  .review-text {
    font-size: 14px;
    -webkit-line-clamp: 5;
  }
}

@media (max-width: 480px) {
  .reviews-carousel-container {
    padding: 30px 10px;
  }

  .review-card {
    flex: 0 0 90%;
    max-width: 90%;
    width: 90%;
    min-height: auto;
    margin: 0;
    padding: 20px 16px;
  }

  .carousel-track {
    gap: 12px;
    padding: 0 5%;
  }

  .reviews-header h2 {
    font-size: 26px;
  }

  .rating-number {
    font-size: 20px;
  }

  .review-avatar {
    width: 40px;
    height: 40px;
    font-size: 15px;
  }

  .review-author-name {
    font-size: 14px;
  }

  .review-date {
    font-size: 12px;
  }

  .review-stars {
    font-size: 16px;
  }

  .review-text {
    font-size: 13px;
    line-height: 1.5;
    -webkit-line-clamp: 6;
  }

  .review-platform {
    width: 18px;
    height: 18px;
  }
}
</style>

<!-- HTML STRUCTURE -->
<div class="reviews-carousel-container">
  <div class="reviews-container-inner">
    <div class="reviews-header">
      <h2>Our Customers</h2>
      <div class="reviews-rating-wrapper">
        <span class="rating-number">5.0</span>
        <div class="stars">★★★★★</div>
        <span class="review-count">Based on 10 Reviews</span>
      </div>
    </div>

    <div class="carousel-wrapper">
      <button class="carousel-nav carousel-nav-prev" id="prevBtn" aria-label="Previous reviews">‹</button>
      <div class="carousel-track-container">
        <div class="carousel-track" id="carouselTrack">
          <!-- Reviews will be dynamically inserted here by JavaScript -->
        </div>
      </div>
      <button class="carousel-nav carousel-nav-next" id="nextBtn" aria-label="Next reviews">›</button>
    </div>
  </div>
</div>

<!-- JAVASCRIPT -->
<script>
(function() {
  'use strict';

  // ============================================
  // CONFIGURATION - EASY TO EDIT
  // ============================================
  const CONFIG = {
    transitionSpeed: 1000      // 1 second transition animation
  };

  // ============================================
  // REVIEWS DATA - EDIT THIS SECTION
  // REPLACE WITH YOUR ACTUAL GOOGLE REVIEWS
  // ============================================
  const reviews = [
    {
      author: "Tyler Abbott",
      initials: "TA",
      rating: 5,
      text: "Chandler came to my house and cleaned up my garden, mowed and edged and trimmed my trees! Yard looks 1000x times better very happy",
      date: "6 days ago"
    },
    {
      author: "Denton James",
      initials: "DJ",
      rating: 5,
      text: "Amazing work. Very punctual. From the design to the finished product, every step was smooth and educational. Mr. Hunn answered all my questions throughout the entire process. 10/10!",
      date: "4 days ago"
    },
    {
      author: "Krystian K.",
      initials: "KK",
      rating: 5,
      text: "Definitely the best lawn care company in the Dallas-Fort Worth area. Chandler showed up on time, cleaned everything up perfectly, and my yard has never looked better. Highly recommend if you need lawn care or weekly mowing.",
      date: "4 days ago"
    },
    {
      author: "Jacob Johnson",
      initials: "JJ",
      rating: 5,
      text: "Very good and detailed oriented and gets the work done fast and clean",
      date: "1 week ago"
    },
    {
      author: "Pat Wallace",
      initials: "PW",
      rating: 5,
      text: "Chandler cleaned up the flower beds around my house and pool. He communicated about his arrival time and updated when traffic slowed him down. He listened to what I wanted and didn't want. He did exactly what I wanted done. His work was excellent. He cleaned up after himself. My yard and pool area looks fantastic. I will recommend him to everyone.",
      date: "6 days ago"
    },
    {
      author: "Adr Hs",
      initials: "AH",
      rating: 5,
      text: "They did an outstanding job on my lawn. The work was extremely clean, fast, and done with great attention to detail. They were very respectful throughout the entire process and made sure every task I requested was completed on time. I truly appreciate their professionalism and reliability. I would absolutely recommend their services to anyone looking for quality lawn care.",
      date: "1 week ago"
    },
    {
      author: "Terri",
      initials: "T",
      rating: 5,
      text: "I highly recommend Chandler. His focus on quality is top notch. His work speak for itself. The drive to ensure his clients are thrilled shows his commitment to earning your business.",
      date: "1 week ago"
    },
    {
      author: "John",
      initials: "J",
      rating: 5,
      text: "So impressed with the attention to detail. Very professional and fair pricing. You won't regret you decision. Try once and you will be a customer forever.",
      date: "6 days ago"
    }
  ];

  // ============================================
  // CAROUSEL LOGIC - DO NOT EDIT BELOW
  // ============================================

  let currentIndex = 0;
  let isTransitioning = false;

  const track = document.getElementById('carouselTrack');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');

  // Generate star rating HTML
  function generateStars(rating) {
    return '★'.repeat(rating) + '☆'.repeat(5 - rating);
  }

  // Get initials from name
  function getInitials(name) {
    return name
      .split(' ')
      .map(word => word[0])
      .join('')
      .toUpperCase()
      .slice(0, 2);
  }

  // Create review card HTML
  function createReviewCard(review) {
    const initials = review.initials || getInitials(review.author);

    return `
      <div class="review-card">
        <div class="review-header">
          <div class="review-avatar">${initials}</div>
          <div class="review-author-info">
            <div class="review-author-name">${review.author}</div>
            <div class="review-date">${review.date}</div>
          </div>
          <svg class="review-platform" viewBox="0 0 24 24" fill="none">
            <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
            <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
            <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
            <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
          </svg>
        </div>
        <div class="review-stars">${generateStars(review.rating)}</div>
        <div class="review-text">${review.text}</div>
      </div>
    `;
  }

  // Initialize carousel
  function initCarousel() {
    // Render all review cards
    track.innerHTML = reviews.map(review => createReviewCard(review)).join('');

    // Add navigation button listeners
    nextBtn.addEventListener('click', nextSlide);
    prevBtn.addEventListener('click', prevSlide);

    updateCarouselPosition();
  }

  // Update carousel position
  function updateCarouselPosition() {
    const card = track.querySelector('.review-card');
    if (!card) return;

    const cardWidth = card.offsetWidth;
    const cardStyle = window.getComputedStyle(card);
    const marginLeft = parseFloat(cardStyle.marginLeft) || 0;
    const marginRight = parseFloat(cardStyle.marginRight) || 0;

    // Get gap from track
    const trackStyle = window.getComputedStyle(track);
    const gap = parseFloat(trackStyle.gap) || 20;

    const offset = -(currentIndex * (cardWidth + marginLeft + marginRight + gap));
    track.style.transform = `translateX(${offset}px)`;
  }

  // Get number of visible cards based on screen size
  function getVisibleCards() {
    const width = window.innerWidth;
    if (width <= 480) return 1;
    if (width <= 768) return 2;
    if (width <= 1024) return 3;
    return 4;
  }

  // Move to next slide
  function nextSlide() {
    if (isTransitioning) return;
    isTransitioning = true;

    const visibleCards = getVisibleCards();
    const maxIndex = reviews.length - visibleCards;

    if (currentIndex < maxIndex) {
      currentIndex++;
      updateCarouselPosition();
    }

    setTimeout(() => {
      isTransitioning = false;
    }, CONFIG.transitionSpeed);
  }

  // Move to previous slide
  function prevSlide() {
    if (isTransitioning) return;
    isTransitioning = true;

    if (currentIndex > 0) {
      currentIndex--;
      updateCarouselPosition();
    }

    setTimeout(() => {
      isTransitioning = false;
    }, CONFIG.transitionSpeed);
  }

  // Handle window resize
  let resizeTimeout;
  window.addEventListener('resize', function() {
    clearTimeout(resizeTimeout);
    resizeTimeout = setTimeout(() => {
      updateCarouselPosition(false);
    }, 250);
  });

  // Initialize on DOM ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initCarousel);
  } else {
    initCarousel();
  }

})();
</script>
